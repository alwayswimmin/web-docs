<!DOCTYPE html>
<html>
	<head>
		<title>Form</title>
		<link rel="stylesheet" type="text/css" href="../../css/style.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    		<link href="../../css/carousel.css" rel="stylesheet">
		<link href="../../css/samuel.css" rel="stylesheet">
	</head>
	<body onload="onStart()">
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">2016shsiang</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="../../index.html">Home</a></li>
                <li><a href="../index.html">Web</a></li>
                <li><a href="../../index.html#about">About/Contact</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="../../research/index.html">Research</a></li>
                    <li><a href="#">Activities</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Personal Projects</li>
                    <li><a href="../../index.html#cs_guide">Crash Course Coding Companion (cs_guide)</a></li>
                    <li><a href="../../index.html#math-chat">Math Chat</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>
    		<br><br>
		<h2>Form</h2>
		<form class="form-horizontal" name="form" autocomplete="on" action="" onsubmit="return validateForm()" method="post">
				<div class="form-group col-md-7" id="namediv">
				<label class="col-sm-2 control-label" for="name">Name</label>
				<div class="col-sm-10"><input type="text" class='form-control' id="name" name='name' onfocus="changecolor('name')" placeholder="Thomas Rudwick" required></input></div>
				</div>
				<div class="form-group col-md-7" id="emaildiv">
					<label class="col-sm-2 control-label" for="email">Email</label>
					<div class="col-sm-10"><input type="email" class='form-control' id="email" name='email' onfocus="changecolor('email')" placeholder="tmrudwick@fcps.edu" required></input></div>
				</div>
				<div class="form-group col-md-7" id="citydiv">
					<label class="col-sm-2 control-label" for="city">City</label>
					<div class="col-sm-10"><input type="text" class='form-control' id="city" name='city' onfocus="changecolor('city')" placeholder="Alexandria" required></input></div>
				</div>
				<div class="form-group col-md-7" id="statediv">
					<label class="col-sm-2 control-label" for="state">State</label>
						<div class="col-sm-10">
						<select class='form-control' id="state" name="state" required>
							<option value=""></option>
							<option value="AL">Alabama</option>
							<option value="AK">Alaska</option>
							<option value="AZ">Arizona</option>
							<option value="AR">Arkansas</option>
							<option value="CA">California</option>
							<option value="CO">Colorado</option>
							<option value="CT">Connecticut</option>
							<option value="DE">Delaware</option>
							<option value="DC">District Of Columbia</option>
							<option value="FL">Florida</option>
							<option value="GA">Georgia</option>
							<option value="HI">Hawaii</option>
							<option value="ID">Idaho</option>
							<option value="IL">Illinois</option>
							<option value="IN">Indiana</option>
							<option value="IA">Iowa</option>
							<option value="KS">Kansas</option>
							<option value="KY">Kentucky</option>
							<option value="LA">Louisiana</option>
							<option value="ME">Maine</option>
							<option value="MD">Maryland</option>
							<option value="MA">Massachusetts</option>
							<option value="MI">Michigan</option>
							<option value="MN">Minnesota</option>
							<option value="MS">Mississippi</option>
							<option value="MO">Missouri</option>
							<option value="MT">Montana</option>
							<option value="NE">Nebraska</option>
							<option value="NV">Nevada</option>
							<option value="NH">New Hampshire</option>
							<option value="NJ">New Jersey</option>
							<option value="NM">New Mexico</option>
							<option value="NY">New York</option>
							<option value="NC">North Carolina</option>
							<option value="ND">North Dakota</option>
							<option value="OH">Ohio</option>
							<option value="OK">Oklahoma</option>
							<option value="OR">Oregon</option>
							<option value="PA">Pennsylvania</option>
							<option value="RI">Rhode Island</option>
							<option value="SC">South Carolina</option>
							<option value="SD">South Dakota</option>
							<option value="TN">Tennessee</option>
							<option value="TX">Texas</option>
							<option value="UT">Utah</option>
							<option value="VA" selected="selected">Virginia</option>
							<option value="VT">Vermont</option>
							<option value="WA">Washington</option>
							<option value="WV">West Virginia</option>
							<option value="WI">Wisconsin</option>
							<option value="WY">Wyoming</option>
						</select>
						</div>
				</div>
				<div class="form-group col-md-7" id="zipdiv">
					<label class="col-sm-2 control-label" for="zip">Zip Code</label>
					<div class="col-sm-10"><input type="text" class="form-control" id="zip" name='zip' onfocus="changecolor('zip')" placeholder="22312" required></input></div>
				</div>
				<div class="form-group col-md-7" id="datediv">
					<label class="col-sm-2 control-label" for="date">Date</label>
					<div class="col-sm-10"><input type="date" class="form-control" id="date" name='date' onfocus="changecolor('date')" placeholder= "YYYY-MM-DD" required></input></div>
				</div>
				<div class="form-group col-md-7" id="extradiv">
					<div class="col-sm-2 control-label">
					<label for="extra">Foreign Language Teacher</label>
					<div align="left" id="allradiodiv">
						<div id="radiodiv1" class="radio">
							<label><input type='radio' name='listType' value='drop-down' checked="checked" onclick='upd()'>drop-down</label>
						</div>
						<div id="radiodiv2" class="radio">
							<label><input type='radio' name='listType' value='list-view' onclick='upd()'>list-view</label>
						</div>
					</div>
					</div>
					<div class="col-sm-10" id="extra" name="extra">
						<div class="form-group col-md-14" id="languagediv">
							<label class="col-sm-2 control-label" for="language">Language</label>
							<div class="col-sm-10">
							<select class="form-control" id='language' name='language' onchange="upd()" required>
								<option value='' selected="selected"></option>
								<option value='ch'>Chinese</option>
								<option value='fr'>French</option>
								<option value='ge'>German</option>
								<option value='ja'>Japanese</option>
								<option value='la'>Latin</option>
								<option value='ru'>Russian</option>
								<option value='sp'>Spanish</option>
								<option value='other'>other...</option>
							</select>
							</div>
						</div>
						<div class="form-group col-md-14" id="teacherdiv">
							<label class="col-sm-2 control-label" for="language">Teacher</label>
							<div class="col-sm-10">
							<select class="form-control" id='teacher' name='teacher'>
								<option value='Chen'>Chen</option>
								<option value='Xu'>Xu</option>
							</select>
							</div>
						</div>
					</div>
				</div>
				<div class="form-group col-md-7" id="commentsdiv">
					<label class="col-sm-2 control-label" for="comments">Additional Comments</label>
	 				<div class="col-sm-10"><textarea class="form-control" id='comments' name='comments' rows="5" cols="80" placeholder='Additional Comments (optional)'></textarea>
					</div>
				</div>
				<div class="form-group col-md-7" id="submit">
					<input class="btn btn-default" type="submit" value="Send"></input>
				</div>
		<div id="alert-good" class="form-group col-md-7 alert alert-success" role="alert" style="display:none">
			<strong>Thanks!</strong> You successfully submitted.
		</div>
		<div id="alert-bad" class="form-group col-md-7 alert alert-danger" role="alert" style="display:none">
		        <strong>Something went wrong.</strong> Please correct the highlighted fields.
	        </div>
		</form>
<script>
var ch = ['Chen', 'Xu'];
var fr = ['Delfosse', 'van de Kamp Washington'];
var ge = ['Oszko'];
var ja = ['Otani'];
var la = ['Conklin', 'Lister'];
var ru = ['Sandstrom'];
var sp = ['Gendive', 'Mateo', 'Rayas Abundis', 'Pou'];

function changecolor(id) {
	document.getElementById(id).style.backgroundColor = "#FFFFFF";
}

function onStart() { 
  document.getElementById('date').valueAsDate = new Date();
 	document.getElementById("name").focus();
	upd();
	form["name"].value = getCookie("name");
	form["email"].value = getCookie("email");
	form["city"].value = getCookie("city");
	form["state"].value = getCookie("state");
	form["zip"].value = getCookie("zip");
	if(getCookie("date")) form["date"].value = getCookie("date");
	form["language"].value = getCookie("language");
	form["listType"].value = getCookie("listType");
	upd();
	form["teacher"].value = getCookie("teacher");
	form["comments"].value = getCookie("comments");
 }
function listType() {
	if(document.getElementsByName('listType')[0].checked == true){
		// dropdown
		document.getElementById('language').size = 1;
		if(document.getElementById('teacherdiv').style.visibility == "visible")
			document.getElementById('teacher').size = 1;
	}
	else{
		// listview
		document.getElementById('language').size = document.getElementById('language').options.length;
		if(document.getElementById('teacherdiv').style.visibility == "visible")
			document.getElementById('teacher').size = document.getElementById('teacher').options.length;
	}
}
function upd(){
	var teacher = document.getElementById('teacher');
	$("#teacher").empty();
	var tlist;
	switch(document.getElementById('language').options[document.getElementById('language')
			.selectedIndex].value){
		case 'ch':
			tlist = ch;
			break;
		case 'fr':
			tlist= fr;
			break;
		case 'ge':
			tlist= ge;
			break;
		case 'ja':
			tlist= ja;
			break;
		case 'la':
			tlist= la;
			break;
		case 'ru':
			tlist= ru;
			break;
		case 'sp':
			tlist= sp;
			break;
		default:
			document.getElementById("teacherdiv").style.visibility = "collapse";
			listType();
			return;
	}
	document.getElementById("teacherdiv").style.visibility = "visible";
	for (var i = 0; i < tlist.length; i++) {
		var option = document.createElement("option");
		option.text = tlist[i];
		option.value = tlist[i];
		teacher.appendChild(option);
	}
	var option = document.createElement("option");
	option.text = "other...";
	option.value = "other";
	teacher.appendChild(option);
	listType();
}
function validateForm() {
	document.getElementById("alert-good").style.display = "none";
	document.getElementById("alert-bad").style.display = "none";

	// set cookies
	var form = document.forms["form"];
	setCookie("name", form["name"].value, 30);
	setCookie("email", form["email"].value, 30);
	setCookie("city", form["city"].value, 30);
	setCookie("state", form["state"].value, 30);
	setCookie("zip", form["zip"].value, 30);
	setCookie("date", form["date"].value, 30);
	setCookie("listType", form["listType"].value, 30);
	setCookie("language", form["language"].value, 30);
	setCookie("teacher", form["teacher"].value, 30);
	setCookie("comments", form["comments"].value, 30);
	
	// validate
	var myname = form["name"].value;
	var myemail = form["email"].value;
	var mycity = form["city"].value;
	var myzip = form["zip"].value;
	var mydate = form["date"].value;
	var validname = /^[\w '-]+$/;
	var validemail = /^[\w._%+-]+@[\w.-]+\.[A-Za-z]{2,}$/;
	var validcity = /^[\w '-]+$/;
	var validzip = /^[0-9]{5}(?:-[0-9]{4})?$/;
	var validdate = /^\d{2}(\d{2})?[-\/]\d{2}[-\/]\d{2}$/;
	var flag = 0;
	if(!validname.test(myname)) {
		flag = 1;
		document.getElementById("name").style.backgroundColor = "#FF3333";
	}
	if(!validemail.test(myemail)) {
		flag = 1;
		document.getElementById("email").style.backgroundColor = "#FF3333";
	}
	if(!validcity.test(mycity)) {
		flag = 1;
		document.getElementById("city").style.backgroundColor = "#FF3333";
	}
	if(!validzip.test(myzip)) {
		flag = 1;
		document.getElementById("zip").style.backgroundColor = "#FF3333";
	}
	if(!validdate.test(mydate)) {
		flag = 1;
		document.getElementById("date").style.backgroundColor = "#FF3333";
	}
	if(flag == 1) {
		document.getElementById("alert-bad").style.display = "block";
		return false;
	}
	
	// alert
	document.getElementById("alert-good").style.display = "block";
	return false;

	// return true;
}
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
}

function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
}
</script>
	</body>
</html>
